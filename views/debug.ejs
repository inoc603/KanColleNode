<html>
  <head>
    <title>Listener</title>
    <style type="text/css">
      #game_div {
        position:relative;
        width:800px;
        height:480px;
        overflow:hidden;
        border-style:solid
      }
      #game_frame {
        position: relative;
        margin: -78px 0px 0px -86px;
      }
      .mytab {
        width:60px;
      }
      .exp_next,  
      .ship_type {
        font-size: small;
      }        
      .table.fleet_table>tbody>tr:first-child>td {
        border-top: none;
      }
      .table.fleet_table>tbody>tr>td {
        vertical-align: middle;
      }
      .progress.health_bar {
        margin-bottom: 0px;
        height: 10px;
      }
      #fleet_panel {
        padding: 0px;
      }
      span.fleet_name_hidden {
        display: none;
      }
      span.fleet_name_shown {
        display: inline;
      }
      html * {
        font-family: 'Microsoft YaHei';
      }
    </style>
    <link rel="stylesheet" href="stylesheets/bootstrap.min.css">
    <link rel="stylesheet" href="stylesheets/bootstrap-theme.min.css">
  </head>
  <body>
<!--     <div id="game_div" class="container-fluid">
      <iframe id="game_frame" scrolling="no" width = "900" height = "1200">
      </iframe>
    </div>
    <button id="load_game" class="button">Load</button>
    <button id="unload_game" class="button">Unload</button> -->
    <div class="panel panel-default col-md-6" id="fleet_panel">
      <div class="panel-heading">舰队</div>
      <div class="panel-body">
        <div class="tabable" id="tab_fleet">
          <ul class="nav nav-tabs">
            <li class="fleet_tab active">
              <a href="#fleet_1" data-toggle="tab">
                <span class="fleet_num">1</span>&nbsp;
                <span class="fleet_name_shown"></span>
              </a>
            </li>
            <li class="fleet_tab">
              <a href="#fleet_2" data-toggle="tab">
                <span class="fleet_num">2</span>&nbsp;
                <span class="fleet_name_hidden"></span>
              </a>
            </li>
            <li class="fleet_tab">
              <a href="#fleet_3" data-toggle="tab">
                <span class="fleet_num">3</span>&nbsp;
                <span class="fleet_name_hidden"></span>
              </a>
            </li>
            <li class="fleet_tab">
              <a href="#fleet_4" data-toggle="tab">
                <span class="fleet_num">4</span>&nbsp;
                <span class="fleet_name_hidden"></span>
              </a>
            </li>
          </ul>
          <div class="tab-content">
            <div class="tab-pane active" id="fleet_1">
              <table class="table fleet_table">
                <tbody></tbody>
              </table>
            </div>
            <div class="tab-pane" id="fleet_2">
              <table class="table fleet_table">
                <tbody></tbody>
              </table>
            </div>
            <div class="tab-pane" id="fleet_3">
              <table class="table fleet_table">
                <tbody></tbody>
              </table>
            </div>
            <div class="tab-pane" id="fleet_4">
              <table class="table fleet_table">
                <tbody></tbody>
              </table>
            </div>
          </div>
        </div>
      </div>
    </div>
    

  </body>

  <script src="/javascripts/jquery-2.1.3.min.js"></script>
  <script src="/javascripts/jquery-ui.min.js"></script>
  <script src="javascripts/bootstrap.min.js"></script>
  <script src="/javascripts/socket.io.js"></script>
  <script>
    var listener_num = <%= listener_num%>
    var is_bind_to_admiral = false;
    $('#fleet_panel').draggable({ addClasses: false
                                , handle: 'div.panel-heading'
                                });

    $('a[data-toggle="tab"]' ,'.fleet_tab').on('shown.bs.tab', function (e) {
      $('span:last-child' ,$(e.target)).attr('class', 'fleet_name_shown')
      $('span:last-child' ,$(e.relatedTarget)).attr('class', 'fleet_name_hidden')
    })

    $(document).ready(function () {
      console.log($('.fleet_tab a:first'))
      $('.fleet_tab.active a:first').tab('show')
    })

    // $("#load_game").click(function () {
    //   $("#game_frame").attr("src", "http://www.dmm.com/netgame/social/-/gadgets/=/app_id=854854/");
    // });
    // $("#unload_game").click(function () {
    //   $("#game_frame").removeAttr("src");
    // });

  </script>
  <script src="/javascripts/listener.js"></script>
  <script src="/javascripts/socket.js"></script>
</html>